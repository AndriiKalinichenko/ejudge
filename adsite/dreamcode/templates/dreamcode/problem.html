{% extends "dreamcode/base.html" %}
{% load i18n markup_tags sekizai_tags crispy_forms_tags dreamcode_tags%}
{% load staticfiles%}



{% block "header" %}{% endblock "header" %}

{% block "content" %}

{% addtoblock "js" %}
<script>
$(DOJ.submissionFormSelector).on('click', '#reset', {url: "{% url 'problem_submission_template' problem.slug %}"}, DOJ.resetSubmission);
$(DOJ.submissionFormSelector).on('submit', {url: "{% url 'submission_test' problem.slug %}", resultsUrl: "{% url 'submission_results' problem.slug %}"}, DOJ.submissionSubmit);
DOJ.pollResults(0, "{% url 'submission_results' problem.slug %}");
</script>
{% endaddtoblock %}

{% addtoblock "js" %}
<script>
$(".hint").on('click', function (){
  $(this).children().slideToggle();
});
</script>
{% endaddtoblock %}

{{ submission_form.media }}
{{ problem_problem_form.media }}
{{ problem_template_form.media }}


<h2>{{ problem.name }}</h2>

{# Nav tabs #}
<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="problem" role="tab" data-toggle="tab">{% trans "Problem" %}</a></li>
  <li role="presentation"><a href="submission/results" role="tab" data-toggle="tab">{% trans "Submission" %}</a></li>
  {% if public_submissions %}
  <li role="presentation"><a href="subpub" role="tab" data-toggle="tab">{% trans "Solution" %}</a></li>
  {% endif %}
  {% if request.user.is_superuser %}
  <li role="presentation"><a href="editproblem" role="tab" data-toggle="tab">{% trans "Edit problem" %}</a></li>
  <li role="presentation"><a href="edittemplate" role="tab" data-toggle="tab">{% trans "Edit template" %}</a></li>
  {% endif %}
</ul>

{# Tab panes #}
<div class="tab-content">
  <div role="tabpanel" class="tab-pane fade in active" id="problem">
    <div class="row">
      <div class="col-lg-9">
        {{ problem.statement }}
        {% for tc in public_test_cases %}
          <h2>{% trans "Test Case" %}</h2>
          <h3>{% trans "Input" %}</h3>
          <pre><code>{{ tc.display_input }}</code></pre>
          <h3>{% trans "Output" %}</h3>
          <pre><code>{{ tc.display_output }}</code></pre>
        {% endfor %}
      </div>
      <!--<div class="col-lg-3">-->
        <!--<h3 class="tags">{% trans "Tags" %}</h3>-->
        <!--{% for ti in problem.tagged_items.all %}-->
          <!--<button type="button" class="btn btn-default">{{ ti.tag.name }}</button>-->
        <!--{% endfor %}-->
      <!--</div>-->
    </div>
  </div>
  <div role="tabpanel" class="tab-pane fade" id="submission">
    <div id="subres"></div>
    {% crispy submission_form %}
  </div>
  <div role="tabpanel" class="tab-pane fade" id="subpub">
    <div id="subpub">
      {% for submission in public_submissions %}
        {{ submission.code|pygmentize }}
      {% endfor %}
    </div>
  </div>
  <!--<div role="tabpanel" class="tab-pane fade" id="editproblem">-->
    <!--{% crispy problem_problem_form %}-->
  <!--</div>-->
  <!--<div role="tabpanel" class="tab-pane fade" id="edittemplate">-->
    <!--{% crispy problem_template_form %}-->
  <!--</div>-->
</div>
{% endblock "content" %}
